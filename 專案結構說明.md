# 📁 專案結構說明

這個文件用最簡單的方式說明每個檔案和資料夾的用途。

## 🗂️ 資料夾結構

```
AI教材轉換專案115/
│
├── 📄 README.md                    ← 專案說明文件
├── 📄 快速開始指南.md              ← 給新手的詳細教學
├── 📄 專案結構說明.md              ← 你現在看的這個檔案
├── 📄 測試教材範例.md              ← 用來測試程式的範例檔案
│
├── 📄 啟動程式.bat                 ← 雙擊這個啟動程式!
├── 📄 package.json                 ← 程式的設定檔(記錄需要哪些套件)
├── 📄 .env                         ← API Key 設定檔(重要!)
├── 📄 .gitignore                   ← Git 忽略清單
│
├── 📁 src/                         ← 程式碼資料夾
│   ├── server.js                   ← 主伺服器程式
│   └── converter.js                ← 轉換引擎(Markdown → PDF/Word)
│
├── 📁 public/                      ← 網頁介面
│   └── index.html                  ← 上傳頁面
│
├── 📁 node_modules/                ← 自動產生,存放套件(不用管它)
│
├── 📁 uploads/                     ← 自動產生,存放上傳的檔案
│
└── 📁 output/                      ← 自動產生,存放轉換後的檔案
    ├── pdf/                        ← PDF 檔案會放這裡
    └── docx/                       ← Word 檔案會放這裡
```

---

## 📄 重要檔案說明

### 1. 啟動程式.bat
**用途**: 啟動整個系統  
**怎麼用**: 雙擊它就好!  
**會做什麼**:
- 檢查 Node.js 是否安裝
- 第一次使用會自動安裝套件
- 啟動網頁伺服器
- 自動打開瀏覽器

### 2. .env
**用途**: 存放敏感資訊(API Key)  
**重要性**: ⭐⭐⭐⭐⭐ 超級重要!  
**內容**:
```
GEMINI_API_KEY=你的API金鑰
PORT=3000
OUTPUT_DIR=./output
```
**注意**: 不要把這個檔案分享給別人!

### 3. package.json
**用途**: 記錄程式需要哪些套件  
**重要性**: ⭐⭐⭐⭐  
**不要手動修改**: 除非你知道自己在做什麼  
**裡面記錄了**:
- express: 網頁伺服器
- puppeteer: PDF 產生器
- multer: 檔案上傳處理
- markdown-it: Markdown 解析器
- @google/generative-ai: Google AI 套件

### 4. src/server.js
**用途**: 主伺服器程式  
**做什麼**:
- 接收檔案上傳
- 呼叫轉換引擎
- 提供下載連結
- 處理錯誤

### 5. src/converter.js
**用途**: 轉換引擎  
**做什麼**:
- 把 Markdown 轉成 HTML
- 用 Puppeteer 產生 PDF
- 用 Pandoc 產生 Word
- 套用漂亮的樣式

### 6. public/index.html
**用途**: 使用者看到的網頁介面  
**特色**:
- 漂亮的紫色漸層設計
- 支援拖曳上傳
- 即時進度顯示
- 一鍵下載

---

## 🔄 程式運作流程

```
1. 使用者上傳 .md 檔案
         ↓
2. server.js 接收檔案
         ↓
3. converter.js 開始轉換
         ↓
4. Markdown → HTML (加上漂亮樣式)
         ↓
5. HTML → PDF (用 Puppeteer)
         ↓
6. Markdown → Word (用 Pandoc)
         ↓
7. 檔案存到 output/ 資料夾
         ↓
8. 回傳下載連結給使用者
         ↓
9. 使用者下載檔案 ✅
```

---

## 📦 自動產生的資料夾

這些資料夾會在程式第一次執行時自動建立,不用手動建立:

### uploads/
- 存放使用者上傳的原始檔案
- 會自動清理舊檔案(避免佔空間)

### output/pdf/
- 存放產生的 PDF 檔案
- 檔名格式: `原始檔名.pdf`

### output/docx/
- 存放產生的 Word 檔案
- 檔名格式: `原始檔名.docx`

### node_modules/
- 存放所有套件(超過 1000 個檔案!)
- 佔用空間: 約 200-300 MB
- **不要刪除**: 程式需要它才能運作
- **不要上傳到 GitHub**: 太大了,而且可以重新安裝

---

## 🎨 樣式系統

### PDF 樣式 (在 converter.js 中)
- 字體: 微軟正黑體
- 紙張: A4
- 邊距: 20mm
- 標題: 藍色底線
- 程式碼: 深色背景
- 表格: 斑馬紋(偶數行有背景色)

### 網頁樣式 (在 index.html 中)
- 主色調: 紫色漸層
- 動畫效果: 淡入、滑動
- 響應式設計: 手機也能用

---

## 🔧 未來可以擴充的功能

目前是「基礎版」,之後可以加入:

### 第二階段:
- [ ] AI 自動整理格式
- [ ] 自訂 PDF 樣式模板
- [ ] 批次轉換多個檔案

### 第三階段:
- [ ] 圖片自動壓縮
- [ ] 目錄自動生成(多層級)
- [ ] 頁眉頁腳自訂

### 第四階段:
- [ ] 線上協作編輯
- [ ] 版本控制
- [ ] 雲端儲存整合

---

## ⚠️ 注意事項

### 不要刪除的檔案:
- ❌ node_modules/ (程式會壞掉)
- ❌ package.json (程式會壞掉)
- ❌ .env (API Key 會不見)
- ❌ src/ 資料夾 (程式會壞掉)

### 可以刪除的檔案:
- ✅ uploads/ 裡的舊檔案
- ✅ output/ 裡的舊檔案
- ✅ 測試教材範例.md (只是範例)

### 可以修改的檔案:
- ✅ .env (更換 API Key)
- ✅ README.md (加入自己的說明)
- ✅ src/converter.js (調整樣式)

---

**最後更新**: 2026-01-15  
**版本**: 1.0.0 (基礎版)
